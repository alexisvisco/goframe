// Package urlhelper ; CODE GENERATED BY goframe; DO NOT EDIT.
package urlhelper

import (
  "fmt"
  "net/url"
  "strings"
)

type URLHelper struct {
  baseURL string
}

func NewURLHelper(baseURL string) *URLHelper {
  return &URLHelper{baseURL: strings.TrimSuffix(baseURL, "/")}
}

{{- range .Helpers }}
type {{ .Name }}Params struct {
{{- if eq (len .Params) 0 }}
  // no params
{{- else }}
{{- range .Params }}
  {{ .FieldName }} {{ .Type }} // {{ .Comment }}
{{- end }}
{{- end }}
  ExtraQuery map[string]string // additional query values
}

func (u *URLHelper) {{ .Name }}(p {{ .Name }}Params) string {
  path := "{{ .Path }}"
{{- range .PathParams }}
  path = strings.ReplaceAll(path, {{printf "%q" (printf "{%s}" .TagName)}}, fmt.Sprintf("%v", p.{{ .FieldName }}))
{{- end }}
  q := url.Values{}
{{- range .QueryParams }}
  q.Set("{{ .TagName }}", fmt.Sprintf("%v", p.{{ .FieldName }}))
{{- end }}
  for k, v := range p.ExtraQuery {
    q.Set(k, v)
  }
  if len(q) > 0 {
    path += "?" + q.Encode()
  }
  return u.baseURL + path
}

{{ end }}
