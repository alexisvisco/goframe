// Package workflow ; CODE GENERATED BY goframe; DO NOT EDIT.
package workflow

import (
  "go.uber.org/fx"
  {{ .imports }}
)

type Registry struct {
  fx.In
  {{- range .workflows }}
  {{ .StructName }} *{{ .Type }}
  {{- end }}
  {{- range .activities }}
  {{ .StructName }} *{{ .Type }}
  {{- end }}
}

var Dependencies = []any{
  {{- range .activities }}
  {{ .Constructor }},
  {{- end }}
  {{- range .workflows }}
  {{ .Constructor }},
  {{- end }}
  {{- if and (eq (len .workflows) 0) (eq (len .activities) 0) }}
  // TODO: add workflows and activities constructors
  {{- end }}
}

func Register(w worker.Worker, deps Registry) {
  {{- range .activities }}
  w.RegisterActivity(deps.{{ .StructName }}.{{ .MethodName}})
  {{- end }}
  {{- range .workflows }}
  w.RegisterWorkflow(deps.{{ .StructName }}.{{ .MethodName}})
  {{- end }}
}
