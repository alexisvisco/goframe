// Code generated by i18n generator; DO NOT EDIT.
package {{ .package_name }}

import (
  "fmt"
  "context"
  "embed"
  "github.com/alexisvisco/goframe/core/i18n"
	{{ .imports }}
)

{{.embeds_files_variables_code}}

{{.structs_code}}

// New{{.struct_name}} creates a new {{.struct_name}} instance from a YAML file
func New{{.struct_name}}() (*{{.struct_name}}, error) {
  trans, err := i18n.TranslationsFromFiles(map[string][]byte{
    {{range $locale, $variable_name := .files}}		"{{$locale}}": {{$variable_name}},{{end}}
  })

  if err != nil {
    return nil, fmt.Errorf("error parsing translations: %w", err)
  }

  t := &{{.struct_name}}{translations: trans}
  t.initializeStructs()
  return t, nil
}

// MustNew{{.struct_name}} creates a new {{.struct_name}} instance or panics on error
func MustNew{{.struct_name}}() *{{.struct_name}} {
  t, err := New{{.struct_name}}()
  if err != nil {
    panic(err)
  }
  return t
}
