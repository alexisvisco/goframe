// Package workflow ; CODE GENERATED BY goframe; DO NOT EDIT.
package workflow

import (
  "go.uber.org/fx"
  {{ .imports }}
)

type Registry struct {
  fx.In
  {{- range .workflows }}
  {{ . }} *{{ . }}
  {{- end }}
  {{- range .activities }}
  {{ . }} *activity.{{ . }}
  {{- end }}
}

var Dependencies = []any{
  {{- range .activities }}
  activity.New{{ . }},
  {{- end }}
  {{- range .workflows }}
  New{{ . }},
  {{- end }}
  {{- if and (eq (len .workflows) 0) (eq (len .activities) 0) }}
  // TODO: add workflows and activities constructors
  {{- end }}
}

func Register(w worker.Worker, deps Registry) {
  {{- range .activities }}
  w.RegisterActivity(deps.{{ . }}.Execute)
  {{- end }}
  {{- range .workflows }}
  w.RegisterWorkflow(deps.{{ . }}.Execute)
  {{- end }}
  {{- if and (eq (len .workflows) 0) (eq (len .activities) 0) }}
  // w.RegisterActivities(deps.ExampleWorkflow.Execute)
  // w.RegisterActivities(deps.ExampleActivity.Execute)
  {{- end }}
}
