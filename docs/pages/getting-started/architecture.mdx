import { FileTree } from 'nextra/components'


# Architecture

Let's look about what the cli generate when you run the `goframe init` command.

## Project structure

<FileTree>
	<FileTree.Folder name="bin" defaultOpen>
		<FileTree.File name="goframe" />
		<FileTree.File name="mjml" />
	</FileTree.Folder>
	<FileTree.Folder name="cmd" defaultOpen>
		<FileTree.Folder name="app">
			<FileTree.File name="main.go" />
		</FileTree.Folder>
		<FileTree.Folder name="cli">
			<FileTree.File name="main.go" />
		</FileTree.Folder>
	</FileTree.Folder>
	<FileTree.Folder name="config" defaultOpen>
		<FileTree.File name="config.go" />
		<FileTree.File name="config.yml" />
	</FileTree.Folder>
	<FileTree.Folder name="db" defaultOpen>
		<FileTree.Folder name="migrations">
			<FileTree.File name="20250613122558_storage.sql" />
		</FileTree.Folder>
		<FileTree.Folder name="seeds">

		</FileTree.Folder>
		<FileTree.File name="seeds.go" />
		<FileTree.File name="migrations.go" />
	</FileTree.Folder>
	<FileTree.Folder name="internal" defaultOpen>
		<FileTree.Folder name="app">
			<FileTree.File name="module.go" />
		</FileTree.Folder>
		<FileTree.Folder name="mailer">
			<FileTree.File name="registry.go" />
		</FileTree.Folder>
		<FileTree.Folder name="provide">
			<FileTree.File name="provide_db.go" />
			<FileTree.File name="provide_http.go" />
			<FileTree.File name="provide_storage.go" />
			<FileTree.File name="provide_worker.go" />
		</FileTree.Folder>
		<FileTree.Folder name="tasks">
		</FileTree.Folder>
		<FileTree.Folder name="repository">
			<FileTree.File name="registry.go" />
		</FileTree.Folder>
		<FileTree.Folder name="service">
			<FileTree.File name="registry.go" />
		</FileTree.Folder>
		<FileTree.Folder name="v1handler">
			<FileTree.File name="registry.go" />
			<FileTree.File name="router.go" />
		</FileTree.Folder>
		<FileTree.Folder name="workflow">
			<FileTree.Folder name="activity"  />
			<FileTree.File name="register.go" />
			<FileTree.File name="workflow_send_email.go" />
		</FileTree.Folder>
	</FileTree.Folder>
	<FileTree.File name="Dockerfile" />
	<FileTree.File name="docker-compose.yaml" />
	<FileTree.File name="go.mod" />
	<FileTree.File name="go.sum" />
</FileTree>

GoFrame follows a clean architecture pattern with dependency injection using Uber's FX framework. The architecture is designed to be modular, testable, and maintainable, separating concerns into distinct layers.

## Detailed explanation

#### `bin/`

This directory contains an helper for running the goframe CLI on your project + a MJML CLI to compile MJML templates into HTML.

#### `cmd/`

This directory contains the entry points for your application. The `app` folder contains the main application entry point, while the `cli` folder contains the CLI entry point.

Related : [CLI documentation](/docs/cli)

#### `config/`

This directory contains the configuration files for your application. The `config.go` file is used to load the configuration from the `config.yml` file.

Related : [Configuration documentation](/docs/configuration)

#### `config/i18n/`

YAML translations for every locale live here. The `bin/goframe i18n` commands
generate a typed Go helper from these files.

Related : [I18n documentation](/docs/i18n)

#### `db/`

This directory contains the database migrations, which are used to create and update the database schema. The `migrations.go` file is used to list them.
The seed files are used to populate the database with initial data. The `seeds.go` file is used to list them.

Related : [Database documentation](/docs/database)



#### `internal/app/module.go`

Define the application dependencies, can be reused across various entrypoints (CLI, HTTP server, etc.). This file is used to register the application's structs with Uber's FX framework.

#### `internal/mailer/`

A mailer sends emails using the MJML and TXT templates. Each mailer implements an interface declared in `internal/types/mailer.go` so mocks can be used in tests. The struct contains multiple methods such as `SendWelcomeEmail`, `SendPasswordResetEmail`, etc. It uses the `github.com/wneessen/go-mail` package to send emails via SMTP.

You can generate them via the CLI using the `bin/goframe generate mailer <mailer name> <mail name>`.

Related : [Mailer documentation](/docs/mails)

#### `internal/provide/`

This directory contains the providers for the application's dependencies. Each file defines a provider for a specific dependency, such as the database, HTTP server, storage, and worker.
Since this is code generated by the CLI, you can easily extend it to add your own providers.

#### `internal/repository/`

A repository is a layer that abstracts the data access logic. It is used to interact with the database and perform CRUD operations on the data.

You can generate repositories using the CLI with the command `bin/goframe generate repository <repo name>`.

#### `internal/service/`

This directory contains the service, a service is a layer that contains the business logic of the application. It is used to perform operations on the data and interact with the repositories.

You can generate services using the CLI with the command `bin/goframe generate service <svc name>`.

#### `internal/v1handler/`

This directory contains the HTTP handlers for the application. Why `v1`? Because the framework is designed to be versioned, so you can have multiple versions of the API.

You can generate handlers using the CLI with the command `bin/goframe generate handler <handler name>`.

Related : [HTTP server documentation](/docs/http-server)

#### `internal/workflow/`

This directory contains the workflow definitions for the application. A workflow is a long-running process that can be paused and resumed. It is used to perform background tasks, such as sending emails or processing data.
We are using Temporal as a workflow engine, so you can define your workflows and activities in this directory.

You can generate workflows using the CLI with the command `bin/goframe generate workflow <wf name> <activity name>... `.

Related : [Worker documentation](/docs/worker)

#### `internal/tasks/`

This directory contains the tasks for the application. A task is generally something that can be run by the CLI.

You can generate tasks using the CLI with the command `bin/goframe generate task <task name>`.

Related : [Tasks documentation](/docs/tasks)
